
@inject HttpClient _http
@inject NavigationManager _navigationManager
@inject IJSRuntime _jsRuntime

@code {
  protected override async Task OnInitializedAsync()
  {
    try
    {
      try
      {
        var blog = await _http.GetFromJsonAsync<Blog>("api/blog");
        await _jsRuntime.InvokeAsync<string>("commonJsFunctions.hideLoader", "blazor-loading-ui");
      }
      catch
      {
        _navigationManager.NavigateTo("admin/register/");
      }
      _navigationManager.NavigateTo($"admin/login/?returnUrl={Uri.EscapeDataString(_navigationManager.Uri)}");
    }
    catch (Exception ex)
    {
      _navigationManager.NavigateTo($"admin/login/?error={ex.Message}");
    }
  }
}
